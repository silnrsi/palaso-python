>>> from palaso.sfm.usfm import parser
>>> from palaso.sfm import generate
>>> from pprint import pprint
>>> import warnings
>>> def test(s, errors="ignore"):
...    with warnings.catch_warnings():
...        warnings.simplefilter("ignore")
...        # import pdb; pdb.set_trace()
...        a = list(parser([s]))
...        r = generate(a)
...        pprint((r == s, generate(a), a))


Basic Milestone test

>>> test(r'\id Text \qt-e|attr="value"\* more text')
(False,
 '\\id Text \\qt-e |attr="value"\\* more text',
 [Element('id', content=[Text('Text '), Element('qt-e', content=[Text('|attr="value"')]), Text(' more text')])])

>>> test(r'\id Text \qt-e |attr="value"\* more text')
(True,
 '\\id Text \\qt-e |attr="value"\\* more text',
 [Element('id', content=[Text('Text '), Element('qt-e', content=[Text('|attr="value"')]), Text(' more text')])])

>>> test(r'\id \ip Text \wj |attr="value"\* more text', errors="error")
Traceback (most recent call last):
  ...
SyntaxError: <string>: line 1,31: Non milestone \wj cannot be closed by \*
